# 問CHATGPT

### SN74HC595 腳位對照表（DIP-16 封裝）

| 腳位編號 | 腳位名稱 | 說明                        |
|:--------:|:--------:|:----------------------------|
| 1        | QB       | 第二位輸出                  |
| 2        | QC       | 第三位輸出                  |
| 3        | QD       | 第四位輸出                  |
| 4        | QE       | 第五位輸出                  |
| 5        | QF       | 第六位輸出                  |
| 6        | QG       | 第七位輸出                  |
| 7        | QH       | 第八位輸出                  |
| 8        | GND      | 接地                        |
| 9        | QH'      | 串接下一顆 shift register    |
| 10       | SRCLR    | 清除暫存器                  |
| 11       | SRCLK    | 移位暫存器時脈              |
| 12       | RCLK     | latch 時脈                  |
| 13       | OE       | 輸出啟用（低有效）          |
| 14       | SER      | 資料輸入（serial in）       |
| 15       | QA       | 第一位輸出                  |
| 16       | VCC      | 電源                        |
> 馬的線路圖都亂命名，真的是智障，請自己只看編號去對我DATASHEET的腳位，已整理在上方。

### 先看OE(SN74HC595_PIN#13)
+ 我的QA~QH各自接到一個LED燈，LED 是「正向驅動」（高電位亮）。
+ 因為OE接地了，所以QA~QH永遠依照暫存器的內容即時反應。
  + 斷電 -> 沒有輸出能力，LED燈不亮
  + RESET(清除暫存器) -> 所有輸出腳位變成低電位(預設值)，LED燈都不亮。


### 接線
# SN74HC595 與 ESP32S 連接表（包含 LED 控制）

| **SN74HC595 腳位** | **ESP32S 腳位**   | **說明**                         | **LED 連接**          |
|-------------------|-------------------|----------------------------------|----------------------|
| **1 (QB)**        | 不連接            | 第二位輸出（對應資料移位後的第 1 位資料輸出）  | LED2，通過限流電阻接地  |
| **2 (QC)**        | 不連接            | 第三位輸出（對應資料移位後的第 2 位資料輸出）  | LED3，通過限流電阻接地  |
| **3 (QD)**        | 不連接            | 第四位輸出（對應資料移位後的第 3 位資料輸出）  | LED4，通過限流電阻接地  |
| **4 (QE)**        | 不連接            | 第五位輸出（對應資料移位後的第 4 位資料輸出）  | LED5，通過限流電阻接地  |
| **5 (QF)**        | 不連接            | 第六位輸出（對應資料移位後的第 5 位資料輸出）  | LED6，通過限流電阻接地  |
| **6 (QG)**        | 不連接            | 第七位輸出（對應資料移位後的第 6 位資料輸出）  | LED7，通過限流電阻接地  |
| **7 (QH)**        | 不連接            | 第八位輸出（對應資料移位後的第 7 位資料輸出）  | LED8，通過限流電阻接地  |
| **8 (GND)**       | **GND**           | 接地                             |                      |
| **9 (QH')**       | 不連接            | 串行輸出，將資料傳送給下一顆 SN74HC595 或外部設備 |                      |
| **10 (SRCLR)**    | **GPIO14**        | 清除暫存器                         | 控制資料清除，設為低（接地） |
| **11 (SRCLK)**    | **GPIO23**        | 移位時脈，用來將資料移到移位暫存器中 | 控制資料移位         |
| **12 (RCLK)**     | **GPIO13**        | 鎖存時脈，用來鎖存資料到輸出寄存器 | 控制資料鎖存         |
| **13 (OE)**       | **GND**           | 輸出啟用（低有效）                | 始終啟用輸出         |
| **14 (SER)**      | **GPIO21**        | 資料輸入（串行資料輸入端）        | 傳送資料到移位暫存器 |
| **15 (QA)**       | 不連接            | 第一位輸出（對應資料移位後的第 8 位資料輸出）   |                      |
| **16 (VCC)**      | **VCC**           | 電源                             |                      |



### ESP32
+ 定義GPIO 14為RESET，接到(SN74HC595_PIN#10,SRCLR)

+ 清除暫存器的範例
```cpp
// 設定 SRCLR 引腳為輸出
pinMode(resetPin, OUTPUT);
// 步驟 1: 拉低 SRCLR，開始清除
digitalWrite(resetPin, LOW);   
// 步驟 2: 延遲 2 微秒（足夠保證清除操作生效）
delayMicroseconds(2);         
// 步驟 3: 拉高 SRCLR，恢復正常操作
digitalWrite(resetPin, HIGH); 
```
